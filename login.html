<!DOCTYPE html>
<html>
<head>
    <title>Login - Skill Swap</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
</head>
<body style="text-align: center; padding-top: 50px; font-family: sans-serif;">
    <h2>Login to Campus Skill-Swap</h2>
    
    <div style="background: #f4f4f4; padding: 20px; display: inline-block; border-radius: 10px; border: 1px solid #ddd;">
        <input type="email" id="email" placeholder="Email" style="padding: 8px; width: 250px;"><br><br>
        <input type="password" id="password" placeholder="Password" style="padding: 8px; width: 250px;"><br><br>
        
        <button onclick="login()" style="background: #2c3e50; color: white; padding: 10px 20px; border: none; cursor: pointer; border-radius: 5px;">Login</button>
        <button onclick="register()" style="background: #ecf0f1; color: #2c3e50; padding: 10px 20px; border: 1px solid #bdc3c7; cursor: pointer; border-radius: 5px;">Register</button>
        
        <p id="status" style="color: blue; font-size: 0.9em;"></p>
    </div>

    <script>
        // YOUR ACTUAL PROJECT CREDENTIALS
        const firebaseConfig = {
            apiKey: "AIzaSyD1YlQ3K09ZcC575IJh7Gbw5FX0qGjBtzs",
            authDomain: "skill-swap-mvp-a5216.firebaseapp.com",
            databaseURL: "https://skill-swap-mvp-a5216-default-rtdb.firebaseio.com",
            projectId: "skill-swap-mvp-a5216",
            storageBucket: "skill-swap-mvp-a5216.firebasestorage.app",
            messagingSenderId: "29089638965",
            appId: "1:29089638965:web:c7967e6e063995fce9df7c",
            measurementId: "G-0YJWK78BK4"
        };
        
        firebase.initializeApp(firebaseConfig);

        // REDIRECT LOGIC: If login works, move to index.html immediately
        firebase.auth().onAuthStateChanged((user) => {
            if (user) {
                console.log("User detected, redirecting...");
                window.location.href = "index.html";
            }
        });

        function register() {
            const e = document.getElementById('email').value;
            const p = document.getElementById('password').value;
            const status = document.getElementById('status');
            
            if(!e || !p) return alert("Please fill in both fields");
            
            status.innerText = "Creating account...";
            firebase.auth().createUserWithEmailAndPassword(e, p)
                .then(() => alert("Account Created! You will be redirected."))
                .catch(err => {
                    status.innerText = "";
                    alert(err.message);
                });
        }

        function login() {
            const e = document.getElementById('email').value;
            const p = document.getElementById('password').value;
            const status = document.getElementById('status');

            if(!e || !p) return alert("Please fill in both fields");

            status.innerText = "Checking credentials...";
            firebase.auth().signInWithEmailAndPassword(e, p)
                .catch(err => {
                    status.innerText = "";
                    alert(err.message);
                });
        }
    </script>
</body>
</html>